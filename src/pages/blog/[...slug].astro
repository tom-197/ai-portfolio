---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
	const blogEntries = await getCollection('blog');
	return blogEntries.map((entry) => ({
		params: { slug: entry.slug },
		props: { entry },
	}));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Layout title={entry.data.title}>
	<article class="prose">
		<h1>{entry.data.title}</h1>
        <div class="metadata">
            <time datetime={entry.data.pubDate.toISOString()}>
                {entry.data.pubDate.toLocaleDateString('en-us', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                })}
            </time>
        </div>
        <hr />
		<Content />
	</article>
</Layout>

<style>
    .prose {
        max-width: 65ch;
        margin: 0 auto;
        padding-top: 2rem;
    }
    .metadata {
        margin-bottom: 2rem;
        color: rgba(255, 255, 255, 0.7);
    }
    hr {
        border: 0;
        border-top: 1px solid rgba(255,255,255,0.1);
        margin: 2rem 0;
    }
</style>
